<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Family Tree: suggest Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Family Tree
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('classsuggest.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="classsuggest-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">suggest Class Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Inheritance diagram for suggest:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classsuggest.png" usemap="#suggest_map" alt=""/>
  <map id="suggest_map" name="suggest_map">
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a6e0521c192159953fda4bd293b01d440"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsuggest.html#a6e0521c192159953fda4bd293b01d440">__construct</a> ($suggestid)</td></tr>
<tr class="separator:a6e0521c192159953fda4bd293b01d440"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88a3a93bbc97e562d8f4a2b04bc72d14"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsuggest.html#a88a3a93bbc97e562d8f4a2b04bc72d14">approve</a> ()</td></tr>
<tr class="separator:a88a3a93bbc97e562d8f4a2b04bc72d14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7786abfabcc1c14520f6199d1e93bbb2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsuggest.html#a7786abfabcc1c14520f6199d1e93bbb2">reject</a> ()</td></tr>
<tr class="separator:a7786abfabcc1c14520f6199d1e93bbb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea8963c5a27e226cd1bbc039d14c39bd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsuggest.html#aea8963c5a27e226cd1bbc039d14c39bd">dontknow</a> ()</td></tr>
<tr class="separator:aea8963c5a27e226cd1bbc039d14c39bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec18fc5fc3aa1f7ab553f632d822bd91"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsuggest.html#aec18fc5fc3aa1f7ab553f632d822bd91">checkpercent</a> ()</td></tr>
<tr class="separator:aec18fc5fc3aa1f7ab553f632d822bd91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32f9238a6ea3e85021319f6cec2f6fca"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsuggest.html#a32f9238a6ea3e85021319f6cec2f6fca">approval_delete</a> ()</td></tr>
<tr class="separator:a32f9238a6ea3e85021319f6cec2f6fca"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:a803056257d5db2637c35becdc6f8ddc8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a803056257d5db2637c35becdc6f8ddc8"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$id</b></td></tr>
<tr class="separator:a803056257d5db2637c35becdc6f8ddc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afde8633e323581d390c204893b54a2f3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afde8633e323581d390c204893b54a2f3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$suggested_value</b></td></tr>
<tr class="separator:afde8633e323581d390c204893b54a2f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e540fe8897c430a0e0fab8760036b40"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8e540fe8897c430a0e0fab8760036b40"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$typesuggest</b></td></tr>
<tr class="separator:a8e540fe8897c430a0e0fab8760036b40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a013083c80765c478262f28166c8f1491"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a013083c80765c478262f28166c8f1491"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>$suggestedby</b></td></tr>
<tr class="separator:a013083c80765c478262f28166c8f1491"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a9ddef5aac5c98ef0d45e23ac8c802ee0"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsuggest.html#a9ddef5aac5c98ef0d45e23ac8c802ee0">check_decision</a> ()</td></tr>
<tr class="separator:a9ddef5aac5c98ef0d45e23ac8c802ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa4dc18391cb837d8c7a5448992790e9"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsuggest.html#aaa4dc18391cb837d8c7a5448992790e9">apply</a> ()</td></tr>
<tr class="separator:aaa4dc18391cb837d8c7a5448992790e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Suggestion Class is used to add, remove or edit suggestions Basically a Class to operate on suggested_info and suggest_approval table</p>
<dl class="section author"><dt>Author</dt><dd>piyush </dd></dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00011">11</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a6e0521c192159953fda4bd293b01d440"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">suggest::__construct </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>$suggestid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Constructor of the class. This gathers the basic information about the suggestion which is to be managed   $db Instance of the db class </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramtype">integer</td><td class="paramname">$suggestid</td><td>The ID of the suggestion to be managed </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00021">21</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;                                     {</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;        global $db;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;        $this-&gt;<span class="keywordtype">id</span> = $suggestid;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;        $row = $db-&gt;get(<span class="stringliteral">&quot;select * from suggested_info where id=$suggestid&quot;</span>);</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;        <span class="comment">//$this-&gt;suggested_value = json_decode($row[&#39;suggested_value&#39;], TRUE);</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;        $this-&gt;typesuggest = $row[<span class="stringliteral">&#39;typesuggest&#39;</span>];</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;        $this-&gt;suggestedby = $row[<span class="stringliteral">&#39;suggested_by&#39;</span>];</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;        <span class="comment">//if typesuggest is remove then suggested value is in json else not</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <span class="keywordflow">if</span> (in_array($row[<span class="stringliteral">&#39;typesuggest&#39;</span>], array(DEL, ADD))) {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;            $this-&gt;suggested_value = $row[<span class="stringliteral">&#39;new_value&#39;</span>];</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;            $this-&gt;suggested_value = json_decode($row[<span class="stringliteral">&#39;new_value&#39;</span>], <span class="keyword">true</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        }</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="aaa4dc18391cb837d8c7a5448992790e9"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">suggest::apply </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is used to accept the suggestion and apply the changes to the main member table   $vanshavali Instance of the vanshavali class   $db Instance of the db class </p>
<dl class="section return"><dt>Returns</dt><dd>null </dd></dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00168">168</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                             {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        global $vanshavali, $db, $suggest_handler;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="comment">//Check if suggested_value was JSON or not</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;        <span class="keywordflow">if</span> (is_array($this-&gt;suggested_value)) {</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            $member = $vanshavali-&gt;getmember($this-&gt;suggested_value[<span class="stringliteral">&#39;id&#39;</span>]);</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;            $member = $vanshavali-&gt;getmember($this-&gt;suggested_value);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;        }</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        <span class="comment">//Get the sub type of suggest to be passed below</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;        $struct = $suggest_handler-&gt;find_structure($this-&gt;typesuggest);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        <span class="comment">//We have the member to be edited. Now apply the given operation</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        <span class="keywordflow">switch</span> ($struct-&gt;type) {</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="keywordflow">case</span> ADD:</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                $member-&gt;add_son($this-&gt;suggested_value[<span class="stringliteral">&#39;name&#39;</span>], $this-&gt;suggested_value[<span class="stringliteral">&#39;gender&#39;</span>]);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            <span class="keywordflow">case</span> DEL:</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                $member-&gt;remove();</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            <span class="keywordflow">case</span> MODIFY:</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                $member-&gt;edit($this-&gt;suggested_value[<span class="stringliteral">&#39;name&#39;</span>], $this-&gt;suggested_value[<span class="stringliteral">&#39;gender&#39;</span>], $this-&gt;suggested_value[<span class="stringliteral">&#39;relationship&#39;</span>], $this-&gt;suggested_value[<span class="stringliteral">&#39;dob&#39;</span>], $this-&gt;suggested_value[<span class="stringliteral">&#39;alive&#39;</span>]);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">//Now delete all the suggestion approvals as they are of no use</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">//$this-&gt;approval_delete();</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="comment">//Now mark the suggestion as applied So that it can be used in future</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;        $db-&gt;get(<span class="stringliteral">&quot;update suggested_info set approved=1 where id=$this-&gt;id&quot;</span>);</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a32f9238a6ea3e85021319f6cec2f6fca"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">suggest::approval_delete </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to delete all the data regarding the suggestion approval or rejection. This is to be used when the suggestion is applied and user votes are of no use. Although it is automatically invoked.   $db </p>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00208">208</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                               {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        global $db;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="keywordflow">if</span> ($db-&gt;get(<span class="stringliteral">&quot;Delete from suggest_approved where suggest_id=$this-&gt;id&quot;</span>)) {</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a88a3a93bbc97e562d8f4a2b04bc72d14"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">suggest::approve </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to add approval to this suggestion. Returns false on error   $db Instance of the db class   $user Instance of the user class </p>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00044">44</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                       {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        global $db, $user;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        <span class="keywordflow">if</span> (!$db-&gt;get(<span class="stringliteral">&quot;Insert into suggest_approved(suggest_id,user_id,action) values($this-&gt;id, </span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="stringliteral">                &quot;</span> . $user-&gt;user[<span class="stringliteral">&#39;id&#39;</span>] . <span class="stringliteral">&quot;,1)&quot;</span>)) {</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        <span class="comment">//Check if suggestion has crossed 50% Mark</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        $this-&gt;<a class="code" href="classsuggest.html#a9ddef5aac5c98ef0d45e23ac8c802ee0">check_decision</a>();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    }</div>
<div class="ttc" id="classsuggest_html_a9ddef5aac5c98ef0d45e23ac8c802ee0"><div class="ttname"><a href="classsuggest.html#a9ddef5aac5c98ef0d45e23ac8c802ee0">suggest\check_decision</a></div><div class="ttdeci">check_decision()</div><div class="ttdef"><b>Definition:</b> <a href="suggest_8php_source.html#l00142">suggest.php:142</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a9ddef5aac5c98ef0d45e23ac8c802ee0"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">suggest::check_decision </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This function is used to take a decision whether to approve the suggestion , reject it on the basis percentage of approval or rejection </p>
<dl class="section return"><dt>Returns</dt><dd>null </dd></dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00142">142</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                      {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        $percent = $this-&gt;<a class="code" href="classsuggest.html#aec18fc5fc3aa1f7ab553f632d822bd91">checkpercent</a>();</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <span class="comment">//3rd has the boolean which checks if everyone has voted</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;        <span class="keywordflow">if</span> ($percent[3]) {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;            <span class="keywordflow">if</span> ($percent[0] &gt; 50) {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                <span class="comment">//Almost half the people have agreed, So lets add it permanently..</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                $this-&gt;<a class="code" href="classsuggest.html#aaa4dc18391cb837d8c7a5448992790e9">apply</a>();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($percent[1] &gt; 50) {</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <span class="comment">//More than half of the people have rejected it, So lets remove the suggestion</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                $this-&gt;<a class="code" href="classsuggest.html#aaa4dc18391cb837d8c7a5448992790e9">apply</a>();</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ($percent[2] &gt; 50) {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                <span class="comment">//More than half of the people don&#39;t know about it</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="comment">//So we have no choice lets approve this suggestion</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                $this-&gt;<a class="code" href="classsuggest.html#aaa4dc18391cb837d8c7a5448992790e9">apply</a>();</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            }</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        }</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div>
<div class="ttc" id="classsuggest_html_aaa4dc18391cb837d8c7a5448992790e9"><div class="ttname"><a href="classsuggest.html#aaa4dc18391cb837d8c7a5448992790e9">suggest\apply</a></div><div class="ttdeci">apply()</div><div class="ttdef"><b>Definition:</b> <a href="suggest_8php_source.html#l00168">suggest.php:168</a></div></div>
<div class="ttc" id="classsuggest_html_aec18fc5fc3aa1f7ab553f632d822bd91"><div class="ttname"><a href="classsuggest.html#aec18fc5fc3aa1f7ab553f632d822bd91">suggest\checkpercent</a></div><div class="ttdeci">checkpercent()</div><div class="ttdef"><b>Definition:</b> <a href="suggest_8php_source.html#l00102">suggest.php:102</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aec18fc5fc3aa1f7ab553f632d822bd91"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">suggest::checkpercent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is to check the percentage of the approval/rejection/dontknow of this suggestion.   $db Instance of the db class </p>
<dl class="section return"><dt>Returns</dt><dd>array </dd></dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00102">102</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                                   {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;        global $db;</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        <span class="comment">//Get all Rejections, Approvals, Dontknow&#39;s</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        $query = $db-&gt;query(<span class="stringliteral">&quot;select * from suggest_approved where suggest_id=&quot;</span> . $this-&gt;<span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;        $row2 = $db-&gt;get(<span class="stringliteral">&#39;select count(*) as totaluser from member where username!=&quot;&quot; and password!=&quot;&quot;&#39;</span>);</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;        $total = (float) $row2[<span class="stringliteral">&#39;totaluser&#39;</span>];</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        $noapproved = 0.0;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        $norejected = 0.0;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        $nodontknow = 0.0;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;        <span class="comment">//Count the no of approvals/Rejections</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        <span class="keywordflow">while</span> ($row = $db-&gt;fetch($query)) {</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keywordflow">switch</span> (intval($row[<span class="stringliteral">&#39;action&#39;</span>])) {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                <span class="keywordflow">case</span> 0:$norejected++;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">case</span> 1:$noapproved++;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="keywordflow">case</span> 2:$nodontknow++;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            }</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        }</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        $noapproved = (float) ($noapproved / $total) * 100;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        $nodontknow = (float) ($nodontknow / $total) * 100;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        $norejected = (float) ($norejected / $total) * 100;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        <span class="comment">//If approved&gt;50 then accept the suggestion</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        <span class="comment">//if rejected&gt;50 then reject the suggestion</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;        <span class="comment">//if donknow&gt;50 then even i don&#39;t know what to do</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        <span class="keywordflow">return</span> array($noapproved, $norejected, $nodontknow);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    }</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="aea8963c5a27e226cd1bbc039d14c39bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">suggest::dontknow </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to mark a suggestion as don't know. Returns false on error   $db Instance of the db class   $user Instance of the user class </p>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00083">83</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                        {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <span class="comment">//Marks suggestion as don&#39;tknow</span></div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        global $db, $user;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        <span class="keywordflow">if</span> (!$db-&gt;get(<span class="stringliteral">&quot;Insert into suggest_approved (suggest_id,user_id,action)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="stringliteral">            values($this-&gt;id,&quot;</span> . $user-&gt;user[0] . <span class="stringliteral">&quot;,2)&quot;</span>)) {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        }</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <span class="comment">//Check if suggestion has crossed 50% mark</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        $this-&gt;<a class="code" href="classsuggest.html#a9ddef5aac5c98ef0d45e23ac8c802ee0">check_decision</a>();</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    }</div>
<div class="ttc" id="classsuggest_html_a9ddef5aac5c98ef0d45e23ac8c802ee0"><div class="ttname"><a href="classsuggest.html#a9ddef5aac5c98ef0d45e23ac8c802ee0">suggest\check_decision</a></div><div class="ttdeci">check_decision()</div><div class="ttdef"><b>Definition:</b> <a href="suggest_8php_source.html#l00142">suggest.php:142</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7786abfabcc1c14520f6199d1e93bbb2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">suggest::reject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function is used to add rejection to the suggestion. Return false on error   $db Instance of the db class   $user Instance of user class </p>
<dl class="section return"><dt>Returns</dt><dd>boolean </dd></dl>

<p>Definition at line <a class="el" href="suggest_8php_source.html#l00063">63</a> of file <a class="el" href="suggest_8php_source.html">suggest.php</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                      {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        <span class="comment">//Rejects the $id provided in the constructor</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        global $db, $user;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span> (!$db-&gt;get(<span class="stringliteral">&quot;Insert into suggest_approved (suggest_id,user_id,action) values</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="stringliteral">            ($this-&gt;id,&quot;</span> . $user-&gt;user[0] . <span class="stringliteral">&quot;,0)&quot;</span>)) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">//Check if suggestion has crossed 50% mark</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        $this-&gt;<a class="code" href="classsuggest.html#a9ddef5aac5c98ef0d45e23ac8c802ee0">check_decision</a>();</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="keywordflow">return</span> TRUE;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    }</div>
<div class="ttc" id="classsuggest_html_a9ddef5aac5c98ef0d45e23ac8c802ee0"><div class="ttname"><a href="classsuggest.html#a9ddef5aac5c98ef0d45e23ac8c802ee0">suggest\check_decision</a></div><div class="ttdeci">check_decision()</div><div class="ttdef"><b>Definition:</b> <a href="suggest_8php_source.html#l00142">suggest.php:142</a></div></div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>vanshavali/<a class="el" href="suggest_8php_source.html">suggest.php</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classsuggest.html">suggest</a></li>
    <li class="footer">Generated on Sat Jun 18 2016 23:00:10 for Family Tree by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
